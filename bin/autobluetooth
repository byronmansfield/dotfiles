#!/usr/bin/expect

set arg [lindex $argv 0];

# start the interactive bluetooth service
spawn bluetoothctl

# Now we are in the controlled session, running bluetooth related commands
if { $arg == "off" } {
  expect #
  send "disconnect 57:D3:98:0C:08:8D\r"
  expect {
    -re "Attempting" { puts "Disconnecting"; exp_continue }
    -re "Successful" { puts "Disconnected"; exp_continue }
    -re "no" { send "exit\r" }
  }
  expect $
} else {
  expect #
  send "connect 57:D3:98:0C:08:8D\r"
  expect "connection successful"
  send "exit\r"
  expect $
}

